<!DOCTYPE html>
<html lang="ru">

<head>
    <meta charset="UTF-8">
    <link rel="icon" href="/git/img/favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DarkCore - MassGen v2.0</title>
    <link rel="stylesheet" href="/git/css/massgenstyles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;500;600&display=swap">
    <style>
        .columns-container {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 20px;
        }

        .param-column {
            flex: 1;
            min-width: 250px;
            max-width: 350px;
        }

        .templates-column {
            flex: 2;
            min-width: 300px;
        }

        .column-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .column-actions {
            display: flex;
            gap: 5px;
        }

        .add-column-btn {
            margin: 15px 0;
            display: flex;
            justify-content: center;
        }

        .param-textarea {
            width: 100%;
            min-height: 200px;
            padding: 10px;
            border: 1px solid #444;
            border-radius: 5px;
            background: rgba(0, 0, 0, 0.3);
            color: #00ff88;
            font-family: 'Courier New', monospace;
            resize: vertical;
        }

        .btn-icon {
            padding: 5px 8px;
            font-size: 12px;
            cursor: pointer;
        }

        .template-info {
            font-size: 12px;
            color: #888;
            margin-top: 5px;
        }

        .variable-list {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-bottom: 10px;
        }

        .variable-tag {
            background: rgba(0, 100, 200, 0.3);
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 12px;
            cursor: pointer;
            border: 1px solid #00aaff;
        }

        .variable-tag:hover {
            background: rgba(0, 100, 200, 0.5);
        }
    </style>
</head>

<body class="main-page">
    <div class="burger-container">
        <label class="burger" for="checkbox">
            <div></div>
            <div></div>
            <div></div>
        </label>
        <input type="checkbox" id="checkbox">
        <nav class="menu">
            <a href="/index.html"><i class="fas fa-home"></i> Главная</a>
            <a href="/git/html/massgen.html"><i class="fas fa-cogs"></i> МассГен</a>
            <a href="/git/html/about.html"><i class="fas fa-info-circle"></i> О нас</a>
            <a href="/git/html/support.html"><i class="fas fa-question-circle"></i> Поддержка</a>
        </nav>
    </div>

    <div class="container">
        <h1 class="header"> <i class="fas fa-code"></i> MassGen v2.1</h1>

        <div class="variable-list" id="variableList">
        </div>

        <div class="columns-container" id="columnsContainer">
        </div>

        <div class="add-column-btn">
            <button id="addColumnBtn" class="btn btn-primary">
                <i class="fas fa-plus"></i> Добавить колонку
            </button>
            <button id="removeColumnBtn" class="btn btn-danger">
                <i class="fas fa-minus"></i> Удалить последнюю колонку
            </button>
        </div>

        <div class="columns-container">
            <div class="templates-column">
                <div class="column-header">
                    <h2><i class="fas fa-file-code"></i> Шаблоны</h2>
                    <div class="template-info">
                        Используйте {1}, {2}, {3}, ... для подстановки
                    </div>
                </div>
                <textarea id="templates" class="param-textarea" placeholder="Введите шаблоны, каждый с новой строки
Пример:
username:{1}:{2}
email:{1}.{2}@domain.com
{3}_{1}_{2}"></textarea>
            </div>
        </div>

        <div class="buttons">
            <button id="generateBtn" class="btn btn-primary">
                <i class="fas fa-bolt"></i> Сгенерировать
            </button>
            <button id="copyBtn" class="btn btn-secondary">
                <i class="fas fa-copy"></i> Копировать
            </button>
            <button id="clearBtn" class="btn btn-danger">
                <i class="fas fa-trash"></i> Очистить всё
            </button>
        </div>

        <div class="output">
            <h2><i class="fas fa-terminal"></i> Результат:</h2>
            <div id="result" class="generated-code"></div>
            <div class="result-stats" id="resultStats"></div>
        </div>

        <div id="status" class="status-bar"></div>

        <div class="footer">
            <p>DarkCore MassGen v2.0 |
                <a href="https://github.com/DarkimuSSS"><i class="fab fa-github"></i> GitHub</a> |
                <a href="https://t.me/DarkimuSSS"><i class="fab fa-telegram"></i> Telegram</a> |
                <a href="https://discord.com/invite/liledarkimusss"><i class="fab fa-discord"></i> Discord</a>
            </p>
        </div>
    </div>

    <script>
        let columnCount = 6;

        function initColumns() {
            const container = document.getElementById('columnsContainer');
            container.innerHTML = '';

            for (let i = 1; i <= columnCount; i++) {
                const column = document.createElement('div');
                column.className = 'param-column';
                column.innerHTML = `
                    <div class="column-header">
                        <h2><i class="fas fa-hashtag"></i> Параметр {${i}}</h2>
                        <div class="column-actions">
                            <button class="btn-icon btn-primary" onclick="moveColumn(${i}, -1)" ${i === 1 ? 'disabled' : ''}>
                                <i class="fas fa-arrow-up"></i>
                            </button>
                            <button class="btn-icon btn-primary" onclick="moveColumn(${i}, 1)" ${i === columnCount ? 'disabled' : ''}>
                                <i class="fas fa-arrow-down"></i>
                            </button>
                        </div>
                    </div>
                    <textarea id="param${i}" class="param-textarea" 
                        placeholder="Значения для {${i}}...
Каждый с новой строки"></textarea>
                `;
                container.appendChild(column);
            }

            updateVariableList();
        }

        function updateVariableList() {
            const variableList = document.getElementById('variableList');
            variableList.innerHTML = '<span style="color:#888;">Доступные переменные:</span>';

            for (let i = 1; i <= columnCount; i++) {
                const tag = document.createElement('span');
                tag.className = 'variable-tag';
                tag.textContent = `{${i}}`;
                tag.onclick = () => insertVariable(i);
                variableList.appendChild(tag);
            }

            const allTag = document.createElement('span');
            allTag.className = 'variable-tag';
            allTag.textContent = 'Вставить все {1}-{' + columnCount + '}';
            allTag.onclick = () => insertAllVariables();
            allTag.style.background = 'rgba(0, 200, 100, 0.3)';
            variableList.appendChild(allTag);
        }

        function insertVariable(num) {
            const textarea = document.getElementById('templates');
            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;
            const variable = `{${num}}`;

            textarea.value = textarea.value.substring(0, start) +
                variable +
                textarea.value.substring(end);

            textarea.focus();
            textarea.setSelectionRange(start + variable.length, start + variable.length);

            const event = new Event('input', { bubbles: true });
            textarea.dispatchEvent(event);
        }
        function insertAllVariables() {
            const textarea = document.getElementById('templates');
            let allVars = '';
            for (let i = 1; i <= columnCount; i++) {
                allVars += `{${i}}`;
                if (i < columnCount) allVars += '_';
            }

            const start = textarea.selectionStart;
            const end = textarea.selectionEnd;

            textarea.value = textarea.value.substring(0, start) +
                allVars +
                textarea.value.substring(end);

            textarea.focus();
            textarea.setSelectionRange(start + allVars.length, start + allVars.length);
        }

        document.getElementById('addColumnBtn').addEventListener('click', () => {
            columnCount++;
            initColumns();
            showStatus(`✓ Добавлена колонка {${columnCount}}`, 'success');
        });

        document.getElementById('removeColumnBtn').addEventListener('click', () => {
            if (columnCount > 1) {
                columnCount--;
                initColumns();
                showStatus(`✓ Удалена колонка {${columnCount + 1}}`, 'success');
            } else {
                showStatus('Нельзя удалить последнюю колонку!', 'warning');
            }
        });

        function moveColumn(index, direction) {
            if (index + direction < 1 || index + direction > columnCount) return;

            const currentTextarea = document.getElementById(`param${index}`);
            const targetTextarea = document.getElementById(`param${index + direction}`);

            const temp = currentTextarea.value;
            currentTextarea.value = targetTextarea.value;
            targetTextarea.value = temp;

            initColumns();
            showStatus(`✓ Колонка {${index}} перемещена`, 'success');
        }
        function generate() {
            console.log('Генерируем с', columnCount, 'колонками...');
            const params = [];
            let maxLength = 0;

            for (let i = 1; i <= columnCount; i++) {
                const textarea = document.getElementById(`param${i}`);
                if (textarea) {
                    const items = textarea.value.split('\n').map(l => l.trim()).filter(l => l);
                    params.push(items);
                    maxLength = Math.max(maxLength, items.length);
                }
            }

            const templatesText = document.getElementById('templates').value;
            const templates = templatesText.split('\n').map(l => l.trim()).filter(l => l);

            let hasEmptyColumns = false;
            params.forEach((items, idx) => {
                if (items.length === 0) {
                    showStatus(`Колонка {${idx + 1}} пуста!`, 'warning');
                    hasEmptyColumns = true;
                }
            });

            if (hasEmptyColumns || templates.length === 0) {
                showStatus('Заполните все колонки и шаблоны!', 'warning');
                return;
            }

            const minLength = Math.min(...params.map(p => p.length));
            const setCount = minLength;

            const differentLengths = params.some(p => p.length !== params[0].length);
            if (differentLengths) {
                showStatus(`⚠ Длины колонок разные! Будут использованы первые ${setCount} наборов`, 'warning');
            }

            let result = '';
            let totalLines = 0;

            templates.forEach(template => {
                for (let i = 0; i < setCount; i++) {
                    let line = template;
                    for (let j = 1; j <= columnCount; j++) {
                        const paramValue = params[j - 1][i] || '';
                        const regex = new RegExp(`\\{${j}\\}`, 'g');
                        line = line.replace(regex, paramValue);
                    }

                    result += line + '\n';
                    totalLines++;
                }

                result += '\n';
            });

            document.getElementById('result').textContent = result.trim();

            const stats = document.getElementById('resultStats');
            stats.innerHTML = `
                <div style="margin-top: 10px; color: #888; font-size: 14px;">
                    <strong>Статистика:</strong> 
                    ${totalLines} строк, 
                    ${setCount} наборов, 
                    ${templates.length} шаблонов, 
                    ${columnCount} параметров
                </div>
            `;

            showStatus(`✓ Сгенерировано ${totalLines} строк`, 'success');
        }

        function copyResult() {
            const text = document.getElementById('result').textContent;
            if (!text.trim()) {
                showStatus('Нет результата для копирования', 'warning');
                return;
            }

            navigator.clipboard.writeText(text).then(() => {
                showStatus('✓ Код скопирован в буфер обмена', 'success');
            }).catch(err => {
                const textarea = document.createElement('textarea');
                textarea.value = text;
                document.body.appendChild(textarea);
                textarea.select();
                document.execCommand('copy');
                document.body.removeChild(textarea);
                showStatus('✓ Код скопирован', 'success');
            });
        }

        function clearAll() {
            for (let i = 1; i <= columnCount; i++) {
                const textarea = document.getElementById(`param${i}`);
                if (textarea) textarea.value = '';
            }

            document.getElementById('templates').value = '';
            document.getElementById('result').textContent = '';
            document.getElementById('resultStats').innerHTML = '';

            showStatus('✓ Все поля очищены', 'success');
        }

        function showStatus(message, type = 'info') {
            const statusBar = document.getElementById('status');
            statusBar.textContent = message;
            statusBar.className = 'status-bar';

            if (type === 'success') {
                statusBar.style.color = '#00ff88';
                statusBar.style.borderLeft = '3px solid #00ff88';
            } else if (type === 'warning') {
                statusBar.style.color = '#ffaa00';
                statusBar.style.borderLeft = '3px solid #ffaa00';
            } else if (type === 'error') {
                statusBar.style.color = '#ff4444';
                statusBar.style.borderLeft = '3px solid #ff4444';
            } else {
                statusBar.style.color = '#00aaff';
                statusBar.style.borderLeft = '3px solid #00aaff';
            }

            setTimeout(() => {
                if (statusBar.textContent === message) {
                    statusBar.textContent = '';
                    statusBar.style.borderLeft = 'none';
                }
            }, 5000);
        }

        document.getElementById('generateBtn').addEventListener('click', generate);
        document.getElementById('copyBtn').addEventListener('click', copyResult);
        document.getElementById('clearBtn').addEventListener('click', clearAll);
        window.onload = function () {
            initColumns();
            setTimeout(() => {
                showStatus('MassGen v2.0 готов к работе! Добавьте данные в колонки и шаблоны.', 'info');
            }, 500);
        };
    </script>
</body>


</html>
